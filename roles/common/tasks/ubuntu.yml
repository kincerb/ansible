---
- name: Install common packages
  apt:
    name: '{{ package }}'
  vars:
    package:
      - apt-transport-https
      - bat
      - ca-certificates
      - curl
      - dialog
      - dosfstools
      - dpkg
      - e2fsprogs
      - findutils
      - fonts-powerline
      - git
      - gnupg
      - gnupgconf
      - gnupg-utils
      - gzip
      - jq
      - lz4
      - pinentry-curses
      - pylint
      - python3-pip
      - python3-venv
      - ranger
      - readline-common
      - rsync
      - silversearcher-ag
      - socat
      - software-properties-common
      - sysfsutils
      - tmux
      - unzip
      - util-linux
      - vim
      - xz-utils

- name: Get nodejs stat
  stat:
    path: /usr/bin/node
  register: node_stat
  ignore_errors: true

- name: Install nodejs
  import_tasks: node.yml
  when: node_stat.stat.exists is not defined
...
